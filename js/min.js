let correctWord=generateCorrectWord("./correctWords.json"),wordList=readWordsFile("./words.json"),boardEmptySlots=[...Array(6)].map(()=>Array(5)),boardTiles=[...Array(6)].map(()=>Array(5)),unfoundLetters=correctWord,currentRow=0,currentSlot=0,toastNum=0,emojiList=[];for(let e=0;e<6;e++){var row=`<div class='row' id=row-${e}>`;document.getElementById("board").insertAdjacentHTML("beforeend",row);for(let t=0;t<5;t++){var emptySlot=`<div class='slot empty' id='slot-${e}-${t}'></div>`;document.getElementById(`row-${e}`).insertAdjacentHTML("beforeend",emptySlot),boardEmptySlots[e][t]=document.getElementById(`slot-${e}-${t}`)}}function keyPress(e){switch(e.key){case"Backspace":return backspacePressed();case"Enter":return enterPressed()}if(e.key.length>1)return;if(!/[A-Za-z]+$/.test(e.key))return;if(5===currentSlot)return;boardEmptySlots[currentRow][currentSlot].classList.remove("empty"),boardEmptySlots[currentRow][currentSlot].classList.add("temp-tile");let t=`<div class='tile' id='tile-${currentRow}-${currentSlot}'>${e.key.toLowerCase()}</div>`;boardEmptySlots[currentRow][currentSlot].insertAdjacentHTML("beforeend",t),boardEmptySlots[currentRow][currentSlot].setAttribute("data-animation","pop"),boardTiles[currentRow][currentSlot]=document.getElementById(`tile-${currentRow}-${currentSlot}`),currentSlot+=1}function keyClick(e){if("backspace"!=e.target.id){if("BUTTON"===e.target.tagName){let t=e.target;if("ENTER"===t.innerText)return void enterPressed();document.dispatchEvent(new KeyboardEvent("keydown",{key:t.innerText.toLowerCase()}))}}else backspacePressed()}function backspacePressed(){if(currentSlot>0)return boardTiles[currentRow][currentSlot-1].remove(),boardEmptySlots[currentRow][currentSlot-1].classList.add("empty"),boardEmptySlots[currentRow][currentSlot-1].classList.remove("temp-tile"),boardEmptySlots[currentRow][currentSlot-1].removeAttribute("data-animation"),void(currentSlot-=1)}function enterPressed(){if(5!==currentSlot)return;let e="";for(let t=0;t<5;t++)e+=boardTiles[currentRow][t].innerText;if(e=e.toLowerCase(),!wordList.includes(e)){for(let e=0;e<5;e++)boardTiles[currentRow][e].setAttribute("data-animation","shake"),setTimeout(function(){boardTiles[currentRow][e].removeAttribute("data-animation")},600);return toastNum+=1,void generateToast(`${capitalizeFirstLetter(e)} is not a valid word!`,.03)}unfoundLetters=correctWord;let t=[],r=Array(5);for(let e=0;e<5;e++)if(correctWord[e]===boardTiles[currentRow][e].innerHTML){r[e]="correct-tile";let o=currentRow,n=e;setTimeout(function(){let e=document.getElementById(`key-${boardTiles[o][n].innerHTML}`);e.classList.remove("key-normal","key-misplaced","incorrect"),e.classList.add("key-correct","fade")},1500),t.push(e),unfoundLetters=unfoundLetters.replace(boardTiles[currentRow][e].innerHTML,"")}for(let e=0;e<5;e++)if(!t.includes(e))if(unfoundLetters.includes(boardTiles[currentRow][e].innerHTML)){r[e]="misplaced-tile";let o=currentRow,n=e;setTimeout(function(){let e=document.getElementById(`key-${boardTiles[o][n].innerHTML}`);e.classList.contains("key-correct")||(e.classList.remove("key-normal","key-incorrect"),e.classList.add("key-misplaced","fade"))},1500),t.push(e),unfoundLetters=unfoundLetters.replace(boardTiles[currentRow][e].innerHTML,"")}else{r[e]="incorrect-tile";let t=currentRow,o=e;setTimeout(function(){let e=document.getElementById(`key-${boardTiles[t][o].innerHTML}`);e.classList.contains("key-misplaced")||e.classList.contains("key-correct")||(e.classList.remove("key-normal"),e.classList.add("key-incorrect","fade"))},1500)}fillEmojiListRow(r),flipTiles(r,currentRow);for(let e=0;e<5&&"correct-tile"===r[e];e++)if(4===e)return console.log(r),winGame(currentRow),document.removeEventListener("keydown",keyPress),document.removeEventListener("click",keyClick),endGame();currentSlot=0,t=[],6===(currentRow+=1)&&setTimeout(function(){return generateToast(correctWord.toUpperCase(),.035,1e3),endGame()},1667)}function flipTiles(e,t){let r=0;for(let o=0;o<5;o++)setTimeout(function(){document.getElementById(`slot-${t}-${o}`).setAttribute("data-animation","flip-in")},r),setTimeout(function(){boardEmptySlots[t][o].classList.remove("temp-tile"),boardTiles[t][o].classList.remove("empty"),document.getElementById(`slot-${t}-${o}`).setAttribute("data-animation","flip-out"),boardTiles[t][o].classList.add(e[o])},r+250),r+=300}function winGame(e){let t=1667;for(let r=0;r<5;r++)setTimeout(function(){if(document.getElementById(`slot-${e}-${r}`).setAttribute("data-animation","bounce"),4===r){let e=["Genius!","Great!","Bravo!"];generateToast(e[Math.floor(Math.random()*e.length)],.035,1e3),console.log(emojiList)}},t),t+=100}function endGame(){let e=`Mickle ${emojiList.length}/6\r\n`+emojiList.join("\r\n");navigator.clipboard.writeText(e)}function fillEmojiListRow(e){let t="";for(let r=0;r<5;r++)switch(e[r]){case"correct-tile":t+="ðŸŸ©";break;case"misplaced-tile":t+="ðŸŸ¨";break;case"incorrect-tile":t+="â¬›"}emojiList.push(t)}function generateToast(e,t,r){let o=`<div class='toast' id='toast-${toastNum}'>${e}</div>`;document.getElementById("game-toaster").insertAdjacentHTML("beforeend",o),setTimeout(()=>{fadeOutEffect(toastNum,t)},r)}function fadeOutEffect(e,t=.05){var r=document.getElementById(`toast-${e}`),o=setInterval(function(){r.style.opacity||(r.style.opacity=1),r.style.opacity>0?r.style.opacity-=t:(clearInterval(o),document.getElementById(`toast-${e}`).remove())},100)}function readWordsFile(e){fetch(e).then(e=>e.json()).then(e=>{wordList=e.words})}function generateCorrectWord(e){fetch(e).then(e=>e.json()).then(e=>{let t=e.correctWords;correctWord=t[Math.floor(Math.random()*t.length)]})}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}document.addEventListener("keydown",keyPress),document.addEventListener("click",keyClick);